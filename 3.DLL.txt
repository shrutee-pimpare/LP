

B1.java

import java.io.*;
import java.util.*;
class B1 {
static {
System.loadLibrary("B1");
}
private native int add(int a, int b);
private native int sub(int a, int b);
private native int mult(int a, int b);
private native int div(int a, int b);
public static void main(String[] args) {
Scanner sc=new Scanner(System.in);
int a, b,ch;
System.out.println("\nEnter value of a : ");
a = sc.nextInt();
System.out.println("\nEnter value of b : ");
b = sc.nextInt();
do
{
System.out.println("\nENTER YOUR CHOICE : ");
ch = sc.nextInt();
switch(ch)
{
case 1 : new B1().add(a,b);
break;
case 2 : new B1().sub(a,b);
break;
case 3 : new B1().mult(a,b);
break;
case 4 : new B1().div(a,b);
break;
default : System.out.println("Your choice is wrong.");
}
}while(ch<5);
}
}

B1.h
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class B1 */
#ifndef _Included_B1
#define _Included_B1
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     B1
 * Method:    add
 * Signature: (II)I
 */
JNIEXPORT jint JNICALL Java_B1_add
  (JNIEnv *, jobject, jint, jint);
/*
 * Class:     B1
 * Method:    sub
 * Signature: (II)I
 */
JNIEXPORT jint JNICALL Java_B1_sub
  (JNIEnv *, jobject, jint, jint);

/*
 * Class:     B1
 * Method:    mult
 * Signature: (II)I
 */
JNIEXPORT jint JNICALL Java_B1_mult
  (JNIEnv *, jobject, jint, jint);
/*
 * Class:     B1
 * Method:    div
 * Signature: (II)I
 */
JNIEXPORT jint JNICALL Java_B1_div
  (JNIEnv *, jobject, jint, jint);
#ifdef __cplusplus
}
#endif
#endif


B1.c

#include <jni.h>
#include <stdio.h>
#include "B1.h"
JNIEXPORT int JNICALL Java_B1_add(JNIEnv *env, jobject obj, jint a, jint b)
{
printf("\n%d + %d = %d\n",a,b,(a+b));
return;
}
JNIEXPORT int JNICALL Java_B1_sub(JNIEnv *env, jobject obj, jint a, jint b)
{
printf("\n%d - %d = %d\n",a,b,(a-b));
return;
}
JNIEXPORT int JNICALL Java_B1_mult(JNIEnv *env, jobject obj, jint a, jint b)
{
printf("\n%d * %d = %d\n",a,b,(a*b));
return;
}
JNIEXPORT int JNICALL Java_B1_div(JNIEnv *env, jobject obj, jint a, jint b)
{
printf("\n%d / %d = %d\n",a,b,(a/b));
return;
}

Commands

Compile Java file
javac filename.java

Commands for creating .h header file of java file(ubuntu)

javac -h jni filename.java

to locate jni.h file
locate jni.h

gcc -I <path from locate> / B1.c



to compile c file
gcc filename.c
-----------------------------------------------------------------------------------------------------------------------------------
B1.c


import java.io.*;
import java.util.*;
class B1 {
 static {
 System.loadLibrary("B1");
 }
 private native int add(int a, int b);
 private native int sub(int a, int b);
 private native int mult(int a, int b);
 private native int div(int a, int b);
 public static void main(String[] args) {
Scanner sc=new Scanner(System.in);
int a, b,ch;
System.out.println("\nEnter value of a : ");
a = sc.nextInt();
System.out.println("\nEnter value of b : ");
b = sc.nextInt();
do
{
System.out.println("\nENTER YOUR CHOICE : ");
ch = sc.nextInt();
switch(ch)
{
case 1 : new B1().add(a,b);
break;
case 2 : new B1().sub(a,b);
break;
case 3 : new B1().mult(a,b);
break;
case 4 : new B1().div(a,b);
break;
default : System.out.println("Your choice is wrong.");
}
}while(ch<5);
 }
}
-------------------------------------------------------------------------B1.java---------------------------------------------------------------------------
#include <jni.h>
#include <stdio.h>
#include "B1.h"
JNIEXPORT int JNICALL Java_B1_add(JNIEnv *env, jobject obj, jint a, jint b)
{
printf("\n%d + %d = %d\n",a,b,(a+b));
return;
}
JNIEXPORT int JNICALL Java_B1_sub(JNIEnv *env, jobject obj, jint a, jint b)
{
 printf("\n%d - %d = %d\n",a,b,(a-b));
 return;
}
JNIEXPORT int JNICALL Java_B1_mult(JNIEnv *env, jobject obj, jint a, jint b)
{
 printf("\n%d * %d = %d\n",a,b,(a*b));
 return;
}
JNIEXPORT int JNICALL Java_B1_div(JNIEnv *env, jobject obj, jint a, jint b)
{
 printf("\n%d / %d = %d\n",a,b,(a/b));
 return;
}


Exeution Steps:
$ javac B1.java
javah -classpath . B1
$ ls
B1.c B1.c~ B1.class B1.h B1.java
$ gcc -shared -fPIC -I/usr/lib/jvm/default-java/include -I/usr/lib/jvm/default-java/include/linux B1.c -o libB1.so
$ ls
B1.c B1.c~ B1.class B1.h B1.java libB1.so
$ java -classpath . -Djava.library.path=. B1
Hello World!
